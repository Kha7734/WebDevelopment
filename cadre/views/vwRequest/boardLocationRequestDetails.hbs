{{#section 'css'}}
  <link rel='stylesheet' href='../../static/css/handleRequest/boardRequestList.css' />
{{/section}}
{{#section 'js'}}
  <script src='../../static/js/requests/boardRequestList.js'></script>
  <link
    rel='stylesheet'
    href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.1/css/all.min.css'
    integrity='sha256-2XFplPlrFClt0bIdPgpz8H7ojnk10H69xRqd9+uTShA='
    crossorigin='anonymous'
  />
{{/section}}

<!-- Page Wrapper -->
<div id="wrapper">
  <!-- Sidebar -->
  <ul
    class="navbar-nav sidebar sidebar-dark accordion"
    id="accordionSidebar"
    style="background: linear-gradient(45deg, #5c7ea1, #509177);"
  >
    <!-- Sidebar - Brand -->
    <div
      class="sidebar-brand d-flex align-items-center justify-content-center"
      href="/"
    >
      <div class="sidebar-brand-text mt-5">ADVERTISING BOARDS MANAGEMENT</div>
    </div>

    <!-- Divider -->
    <hr class="sidebar-divider my-0" />

    <!-- Nav Item - Dashboard -->
    <li class="nav-item">
      <a class="nav-link mt-5" href="/">
        <i class="bi bi-house"></i>
        <span>TRANG CHỦ</span></a>
    </li>
    <!-- Divider -->
    <hr class="sidebar-divider" />
    <!-- Heading -->
    <div class="sidebar-heading">
      QUẢN LÝ
    </div>

    <!-- Nav Item - Pages Collapse Menu -->
    <li class="nav-item">
      <a class="nav-link" href="/boardsLocation" id="option">
        <i class="bi bi-clipboard-data"></i>
        <span>Xem danh sách</span>
      </a>
    </li>

    <!-- Divider -->
    <hr class="sidebar-divider" />
    <!-- Heading -->
    <div class="sidebar-heading mt-4">
      Xử lý báo cáo
    </div>

    <!-- Nav Item - Pages Collapse Menu -->
    <li class="nav-item">
      <a class="nav-link" href="/reports" id="option">
        <i class="bi bi-clipboard-data"></i>
        <span>Xem danh sách</span>
      </a>
    </li>

    <!-- Divider -->
    <hr class="sidebar-divider" />
    <!-- Heading -->
    <div class="sidebar-heading mt-4">
      Cấp phép quảng cáo
    </div>

    <!-- Nav Item - Pages Collapse Menu -->
    <li class="nav-item">
      <a class="nav-link" href="#" id="option">
        <i class="bi bi-plus-circle"></i>
        <span>Tạo yêu cầu</span>
      </a>
    </li>

    <!-- Nav Item - Pages Collapse Menu -->
    <li class="nav-item">
      <a class="nav-link" href="#" id="option">
        <i class="bi bi-clipboard-data"></i>
        <span>Xem danh sách</span>
      </a>
    </li>

    <!-- Log out -->
    <a class="sidebar-heading mt-5 logout" id="logout" href="/login">
      ĐĂNG XUẤT
    </a>

  </ul>

  <!-- End of Sidebar -->

  <!-- Content Wrapper -->
  <div id="content-wrapper" class="d-flex flex-column">

    <div class="container">
      <div class="row">
        <div class="col-xs-12 ">
          <nav>
            <div class="nav nav-tabs nav-fill" id="nav-tab" role="tablist">
              <a class="nav-item nav-link active" id="nav-home-tab" data-toggle="tab" href="#nav-profile" role="tab" aria-controls="nav-home" aria-selected="true"><b>Profile</b></a>
              <a class="nav-item nav-link" id="nav-profile-tab" data-toggle="tab" href="#nav-secure" role="tab" aria-controls="nav-profile" aria-selected="false"><b>Security</b></a>
            </div>
          </nav>
          <div class="tab-content py-3 px-3 px-sm-0" id="nav-tabContent">
            <div class='tab-pane active' id='profile' role='tabpanel' aria-labelledby='profile-tab'>
              <div class='container-fluid mt-2'> 
                <!-- Thông tin bảng quảng cáo -->
                {{#if newBoardLocation}}
                  <div class='card shadow mb-2'>
                    <div class='card-body'>
                      <div class='row d-flex align-items-stretch'>
                        <div class='col-lg-5 col-md-5 col-sm-6'>
                          <div class='white-box text-center carousel-container'>
                            {{#if newBoardLocation.imgBillboardLocation}}
                              <div id="reportImageCarouselNew" class="carousel slide" data-ride="carousel">
                                <div class="carousel-inner">
                                  {{#each newBoardLocation.imgBillboardLocation}}
                                    <div class="carousel-item {{#if @first}} active {{/if}}">
                                      <img src="{{this}}" class="d-block carousel-img img-fluid" alt="Image {{@index}}">
                                    </div>
                                  {{/each}}
                                </div>
                                <button class="carousel-control-prev" type="button" data-bs-target="#reportImageCarouselNew" data-bs-slide="prev">
                                  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                  <span class="visually-hidden">Previous</span>
                                </button>
                                <button class="carousel-control-next" type="button" data-bs-target="#reportImageCarouselNew" data-bs-slide="next">
                                  <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                  <span class="visually-hidden">Next</span>
                                </button>
                              </div>
                            {{else}}
                              <img src='/static/img/adboard.png' class='img-fluid' alt='Board Location'/>
                            {{/if}}
                          </div>
                        </div>
                        <!-- Thông tin điểm đặt quảng cáo -->
                        <div class='col-lg-7 col-md-7 col-sm-6'>
                          <h4 class='box-title d-flex flex-row justify-content-between'>
                            <strong>{{newBoardLocation.advertisementForm.advertisementForm}}</strong>
                            {{#compare newBoardLocation.status '===' 0}}
                              <a class="btn btn-outline-primary" id="newBoardLocation" href="/boardLocationRequest/{{newBoardLocation._id}}/accept?approve=true">Mới</a>
                            {{else compare newBoardLocation.status '===' -1}}
                              <a class="btn btn-outline-primary disabled" id="newBoardLocation" href="/boardLocationRequest/{{newBoardLocation._id}}/accept?approve=true" aria-disabled="true">Mới</a>
                            {{else}}
                              <a class="btn btn-primary disabled" id="newBoardLocation" href="/boardLocationRequest/{{newBoardLocation._id}}/accept?approve=true" aria-disabled="true">Mới - Đã chọn</a>
                            {{/compare}}
                          </h4>
                          <p>
                            {{newBoardLocation.addr.street_number}}, {{newBoardLocation.addr.route}}, {{newBoardLocation.addr.ward}},
                            {{newBoardLocation.addr.district}}, {{newBoardLocation.addr.city}}
                          </p>
                          <p>
                            Phân loại:
                            {{#each newBoardLocation.locationCategory}}
                              <span class='badge badge-pill badge-primary'>
                                {{this.locationCategory}}
                              </span>
                            {{/each}}
                          </p>
                          <p>Lý do: {{newBoardLocation.reason}}</p>                     
                        </div>
                      </div>
                    </div>
                  </div>
                {{else}}
                  <div class='alert alert-warning' role='alert'>
                    <strong>
                      Không tìm thấy yêu cầu chỉnh sửa
                    </strong>
                  </div>
                {{/if}}
                {{#if oldBoardLocation}}
                  <div class='card shadow mb-2'>
                    <div class='card-body'>
                      <div class='row d-flex align-items-stretch'>
                        <div class='col-lg-5 col-md-5 col-sm-6'>
                          <div class='white-box text-center carousel-container'>
                            {{#if oldBoardLocation.imgBillboardLocation}}
                              <div id="reportImageCarousel" class="carousel slide" data-ride="carousel">
                                <div class="carousel-inner">
                                  {{#each oldBoardLocation.imgBillboardLocation}}
                                    <div class="carousel-item {{#if @first}} active {{/if}}">
                                      <img src="{{this}}" class="d-block carousel-img img-fluid" alt="Image {{@index}}">
                                    </div>
                                  {{/each}}
                                </div>
                                <button class="carousel-control-prev" type="button" data-bs-target="#reportImageCarousel" data-bs-slide="prev">
                                  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                  <span class="visually-hidden">Previous</span>
                                </button>
                                <button class="carousel-control-next" type="button" data-bs-target="#reportImageCarousel" data-bs-slide="next">
                                  <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                  <span class="visually-hidden">Next</span>
                                </button>
                              </div>
                            {{else}}
                              <img src='/static/img/adboard.png' class='img-fluid' alt='Board Location'/>
                            {{/if}}
                          </div>
                        </div>
                        <!-- Thông tin điểm đặt quảng cáo -->
                        <div class='col-lg-7 col-md-7 col-sm-6'>
                          <h4 class='box-title d-flex flex-row justify-content-between'>
                            <strong>{{oldBoardLocation.advertisementForm.advertisementForm}}</strong>
                            {{#compare newBoardLocation.status '===' -1 }}
                              <a class="btn btn-danger disabled" href="/boardLocationRequest/{{newBoardLocation._id}}/accept?approve=false" aria-disabled="true">Cũ - Đã chọn</a>
                            {{else compare newBoardLocation.status '===' 0}}
                              <a class="btn btn-outline-danger" href="/boardLocationRequest/{{newBoardLocation._id}}/accept?approve=false">Cũ</a>
                            {{else}}
                              <a class="btn btn-outline-danger disabled" href="/boardLocationRequest/{{newBoardLocation._id}}/accept?approve=false" aria-disabled="true">Cũ</a>
                            {{/compare}}
                          </h4>
                          <p>
                            {{oldBoardLocation.addr.street_number}}, {{oldBoardLocation.addr.route}}, {{oldBoardLocation.addr.ward}},
                            {{oldBoardLocation.addr.district}}, {{oldBoardLocation.addr.city}}
                          </p>
                          <p>
                            Phân loại:
                            {{#each oldBoardLocation.locationCategory}}
                              <span class='badge badge-pill badge-primary'>
                                {{this.locationCategory}}
                              </span>
                            {{/each}}
                          </p>           
                        </div>
                      </div>
                    </div>
                  </div>
                {{else}}
                  <div class='alert alert-warning' role='alert'>
                    <strong>
                      Không tìm thấy yêu cầu chỉnh sửa
                    </strong>
                  </div>
                {{/if}}
              </div>
            </div>
        </div>
      </div>
    </div>
             
  </div>
</div>