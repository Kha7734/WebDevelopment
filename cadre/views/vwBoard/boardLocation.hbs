{{#section 'css'}}
  <link rel='stylesheet' href='../../static/css/list.css' />
{{/section}}

{{#section 'js'}}
  <link href='https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css' rel='stylesheet' />
  <script href='../../stdatic/js/boards/boardLocation.js'></script>  
{{/section}}

<!-- Page Wrapper -->
<div id="wrapper">
  <!-- Sidebar -->
  <ul
    class="navbar-nav sidebar sidebar-dark accordion"
    id="accordionSidebar"
    style="background: linear-gradient(45deg, #5c7ea1, #509177);"
  >
    <!-- Sidebar - Brand -->
    <div
      class="sidebar-brand d-flex align-items-center justify-content-center"
      href="/"
    >
      <div class="sidebar-brand-text mt-5">ADVERTISING BOARDS MANAGEMENT</div>
    </div>

    <!-- Divider -->
    <hr class="sidebar-divider my-0" />

    <!-- Nav Item - Dashboard -->
    <li class="nav-item">
      <a class="nav-link mt-5" href="/">
        <i class="bi bi-house"></i>
        <span>TRANG CHỦ</span></a>
    </li>
    <!-- Divider -->
    <hr class="sidebar-divider" />
    <!-- Heading -->
    <div class="sidebar-heading">
      QUẢN LÝ
    </div>

    <!-- Nav Item - Pages Collapse Menu -->
    <li class="nav-item">
      <a class="nav-link" href="/boardsLocation" id="option">
        <i class="bi bi-clipboard-data"></i>
        <span>Xem danh sách</span>
      </a>
    </li>

    <!-- Divider -->
    <hr class="sidebar-divider" />
    <!-- Heading -->
    <div class="sidebar-heading mt-4">
      Xử lý báo cáo
    </div>

    <!-- Nav Item - Pages Collapse Menu -->
    <li class="nav-item">
      <a class="nav-link" href="/reports" id="option">
        <i class="bi bi-clipboard-data"></i>
        <span>Xem danh sách</span>
      </a>
    </li>

    <!-- Divider -->
    <hr class="sidebar-divider" />
    <!-- Heading -->
    <div class="sidebar-heading mt-4">
      Cấp phép quảng cáo
    </div>

    <!-- Nav Item - Pages Collapse Menu -->
    <li class="nav-item">
      <a class="nav-link" href="#" id="option">
        <i class="bi bi-plus-circle"></i>
        <span>Tạo yêu cầu</span>
      </a>
    </li>

    <!-- Nav Item - Pages Collapse Menu -->
    <li class="nav-item">
      <a class="nav-link" href="#" id="option">
        <i class="bi bi-clipboard-data"></i>
        <span>Xem danh sách</span>
      </a>
    </li>

    <!-- Log out -->
    <a class="sidebar-heading mt-5 logout" id="logout" href="/login">
      ĐĂNG XUẤT
    </a>

  </ul>

  <!-- End of Sidebar -->
<div class='container mt-4'>
  <div class='row'>
    <div >
      <form action="http://localhost:4000/boardsLocation/departmental" method="get">
      <input type="hidden" name="action" value="add" >
      <button class="btn btn-primary">
        <i class="bi bi-plus-square"></i> Thêm điểm đặt mới
      </button>
      </form>

    </div>
    <div class='col-lg-12'>
      <div class='main-box clearfix'>
        <div class='table-responsive'>
          <table class='table user-list'>
            <thead>
              <tr>
                <th>
                  <span>
                    Board Location
                  </span>
                </th>
                <th>
                  <span>
                    Type
                  </span>
                </th>
                <th class='text-center'>
                  <span>
                    Status
                  </span>
                </th>
                <th>
                  &nbsp;
                </th>
              </tr>
            </thead>
            <tbody class='reports-list'>
              {{#if boardLocation}}
                {{#each boardLocation}}
                  <tr>
                    <td>
                      <div class='row'>
                        <!-- Cột cho ảnh -->
                        <div class='col-md-2'>
                          <img src='{{this.imgBillboardLocation.[0]}}' alt='' class='img-fluid' id='boardImage_{{this._id}}'>
                        </div>

                        <!-- Cột cho Advertisement Form và Địa chỉ -->
                        <div class='col-md-10'>
                          <a href='/boardsLocation/{{this._id}}' class='user-link' id='advertisementForm_{{this._id}}'>
                            {{this.advertisementForm}}
                          </a>
                          <span class='user-subhead d-block mt-2' id='address_{{this._id}}'>
                            {{this.addr.street_number}}, {{this.addr.route}}, {{this.addr.ward}}, {{this.addr.district}}, {{this.addr.city}}
                          </span>
                        </div>
                      </div>
                    </td>
                    <td>
                      {{#each this.locationCategory}}
                        <span id='locationCategory_{{this._id}}'>{{this.locationCategory}}</span>,
                      {{/each}}
                    </td>
                    <td class='text-center'>
                      {{#compare this.isPlan '===' true}}
                        <span class='badge badge-pill badge-success' id='isPlan_{{this._id}}'>
                          Đã quy hoạch
                        </span>
                      {{else}}
                        <span class='badge badge-pill badge-warning' id='isPlan_{{this._id}}'>
                          Chưa quy hoạch
                        </span>
                      {{/compare}}
                    </td>
                    <td width='11%'>
                      <a href='http://localhost:4000/boardsLocation/{{this._id}}' class='table-link'>
                        <i class="bi bi-zoom-in"></i>
                      </a>  
                      <a href=
                      {{#if ../isSuperAdmin}}
                        '/boardsLocation/departmental/{{this._id}}?action=update'
                      {{else}}
                        '/boardsLocation/{{this._id}}/changeInfoRequest' 
                      {{/if}}
                        class='table-link boardLocationReq'>
                        <span class='fa-stack'>
                          <i class='fa fa-square fa-stack-2x'></i>
                          <i class='fa fa-pencil fa-stack-1x fa-inverse'></i>
                        </span>
                      </a>

                      {{#if ../isSuperAdmin}}
                        <a href = 'http://localhost:4000/api/v1/boardLocation/delete/{{this._id}}' class='table-link boardLocationReq'>
                          <i class="fa fa-trash" aria-hidden="true"></i>
                        </a>
                      {{/if}}
                    </td>
                  </tr>
                {{/each}}
              {{else}}
                <tr>
                  <td colspan='5'>
                    <div class='alert alert-danger'>
                      No board location found
                    </div>
                  </td>
                </tr>
              {{/if}}
            </tbody>
          </table>
        </div>
        <!-- Pagination.handlebars -->
        <nav aria-label="Page navigation">
          <ul class="pagination justify-content-center">
            {{#if hasPreviousPage}}
              <li class="page-item">
                <a class="page-link" href="?page={{previousPage}}" aria-label="Previous">
                  <span aria-hidden="true">&laquo;</span>
                </a>
              </li>
            {{/if}}

            {{#paginate currentPage lastPage}}
              <li class="page-item {{#if (eq this.number currentPage)}}active{{/if}}">
                <a class="page-link" href="?page={{this.number}}">{{this.number}}</a>
              </li>
            {{/paginate}}


            {{#if hasNextPage}}
              <li class="page-item">
                <a class="page-link" href="?page={{nextPage}}" aria-label="Next">
                  <span aria-hidden="true">&raquo;</span>
                </a>
              </li>
            {{/if}}
          </ul>
        </nav>
      </div>
    </div>
  </div>
</div>
</div>

<!-- Logout Modal-->
<div
  class="modal fade"
  id="logoutModal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Xác nhận đăng xuất</h5>
        <button class="close" id="cancel">
          <span aria-hidden="true">×</span>
        </button>
      </div>
      <div class="modal-body">
        <i class="bi bi-box-arrow-right"></i>
      </div>
      <div class="modal-footer">
        <a class="btn btn-danger" href="/login">Đăng xuất</a>
      </div>
    </div>
  </div>
</div>